angular.module("gm.Satellite",[]).provider("Satellite",function(){var e=["on","raise"];function t(e,t,r){var n=e.$on?"$on":"on";return e[n](t,function(e){var t=Array.prototype.slice.call(arguments);t.splice(0,1);r.apply(this,t)})}return{setEventMethods:function(t,r){e=[t,r]},$get:["$rootScope",function(r){return{listeners:[],setupEvent:function(n,i){var s=this;var l;var o;var u,a;if(!s[n]){s[n]={_publisherName:n}}l=s[n];if(!l[e[0]]){for(var c=0,v=e.length;c<v;c++){l[e[c]]={}}}u=e[0];a=e[1];o=n+":"+i;l[a][i]=function(){r.$broadcast.apply(r,[o].concat(Array.prototype.slice.call(arguments)))};l[u][i]=function(e,n){var i,l;if(arguments.length<2){i=e;e=r;n=i}else{e.$on("$destroy",function(){l()})}l=t(e,o,n,s);var u={handler:n,dereg:l,eventId:o,scope:e};s.listeners.push(u)}},listSubscribers:function(){return this.listeners.reduce(function(e,t,r,n){e.push(t.eventId.split(":")[0]);return e},[])},listSubscriberMethods:function(e){return this.listeners.reduce(function(t,r){if(e===r.eventId.split(":")[0])t.push(r.eventId.split(":")[1]);return t},[])},removeSubscription:function(e,t){var r=this.listeners;for(var n=r.length-1;n>=0;n--){if(r[n].eventId.split(":")[0]===e&&r[n].eventId.split(":")[1]===t){r[n].dereg();r.splice(n,1)}}},removeAllSubscriptions:function(e){var t=this.listeners;for(var r=t.length-1;r>=0;r--){if(t[r].eventId.split(":")[0]===e){t[r].dereg();t.splice(r,1)}}},removePublisher:function(e){var t=this;var r=t.listeners;if(angular.isDefined(t[e])){delete t[e]}t.removeAllSubscriptions(e)}}}]}});